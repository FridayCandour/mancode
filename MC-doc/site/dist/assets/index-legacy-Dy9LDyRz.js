!function(){function e(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e=function(){return r};var t,r={},n=Object.prototype,i=n.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var i=t&&t.prototype instanceof _?t:_,o=Object.create(i.prototype),s=new P(n||[]);return a(o,"_invoke",{value:A(e,r,s)}),o}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=h;var d="suspendedStart",v="suspendedYield",y="executing",m="completed",g={};function _(){}function b(){}function w(){}var k={};f(k,s,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(O([])));E&&E!==n&&i.call(E,s)&&(k=E);var S=w.prototype=_.prototype=Object.create(k);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(n,a,o,s){var u=p(e[n],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==c(f)&&i.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var n;a(this,"_invoke",{value:function(e,i){function a(){return new t((function(t,n){r(e,i,t,n)}))}return n=n?n.then(a,a):a()}})}function A(e,r,n){var i=d;return function(a,o){if(i===y)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:t,done:!0}}for(n.method=a,n.arg=o;;){var s=n.delegate;if(s){var u=N(s,n);if(u){if(u===g)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=y;var c=p(e,r,n);if("normal"===c.type){if(i=n.done?m:v,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=m,n.method="throw",n.arg=c.arg)}}}function N(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,N(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=p(i,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,g;var o=a.arg;return o?o.done?(r[e.resultName]=o.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,g):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function O(e){if(e||""===e){var r=e[s];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return a.next=a}}throw new TypeError(c(e)+" is not iterable")}return b.prototype=w,a(S,"constructor",{value:w,configurable:!0}),a(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,l,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},r.awrap=function(e){return{__await:e}},C(L.prototype),f(L.prototype,u,(function(){return this})),r.AsyncIterator=L,r.async=function(e,t,n,i,a){void 0===a&&(a=Promise);var o=new L(h(e,t,n,i),a);return r.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(S),f(S,l,"Generator"),f(S,s,(function(){return this})),f(S,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=O,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),j(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;j(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:O(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),g}},r}function t(e,t,r,n,i,a,o){try{var s=e[a](o),u=s.value}catch(c){return void r(c)}s.done?t(u):Promise.resolve(u).then(n,i)}function r(e){return function(){var r=this,n=arguments;return new Promise((function(i,a){var o=e.apply(r,n);function s(e){t(o,i,a,s,u,"next",e)}function u(e){t(o,i,a,s,u,"throw",e)}s(void 0)}))}}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:String(t)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,i=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=f(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function f(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}System.register([],(function(t,i){"use strict";return{execute:function(){function t(e){var r,n=new DocumentFragment,i=l(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(Array.isArray(a))n.appendChild(t(a));else{if(a instanceof p&&(a=a.render(void 0)),"function"==typeof a&&"function"==typeof(a=a())&&(a=a()),"string"==typeof a||"number"==typeof a){n.appendChild(document.createTextNode(a));continue}if(a instanceof HTMLElement||a instanceof DocumentFragment)n.appendChild(a);else if(void 0!==a)throw new Error("  ✘  Cradova err:  invalid child type: "+a+" ("+c(a)+")")}}}catch(o){i.e(o)}finally{i.f()}return n}var i=function(e){return function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(e,r){var n={},i=null;if(0===r.length)return e;for(var a=0;a<r.length;a++){var o=r[a];"function"==typeof o&&(o=o()),o instanceof p&&(o=o.render()),o instanceof HTMLElement||o instanceof DocumentFragment?e.appendChild(o):Array.isArray(o)?e.appendChild(t(o)):"string"!=typeof o&&"number"!=typeof o?"object"!==c(o)||(n=Object.assign(n,o)):i=o}if("object"===c(n)&&e)for(var s=function(){var t=u(f[l],2),r=t[0],i=t[1];if("style"===r&&"object"===c(i))return Object.assign(e.style,i),0;if(r.includes("data-"))return e.setAttribute(r,i),0;if(r.includes("aria-"))return e.setAttribute(r,i),0;if("href"===r&&"string"==typeof i){var a=i||"";return a.includes("://")||e.addEventListener("click",(function(t){//! get url hash here and scroll into view
if(t.preventDefault(),b.navigate(e.pathname),a.includes("#")){var r,n=a.split("#").at(-1);null===(r=document.getElementById("#"+n))||void 0===r||r.scrollIntoView()}})),e.setAttribute(r,i),0}if(void 0!==e.style[r]&&"src"!==r)return e.style[r]=i,0;if(Array.isArray(i)){if("reference"==r&&i[0]instanceof d)return i[0]._appendDomForce(i[1],e),0;if(i[0]instanceof y)return i[0].bindRef(e,{_element_property:r,signalProperty:i[1]}),0}if("onmount"===r&&"function"==typeof n.onmount)return h.addEventListener("onmountEvent",(function(){var t;null===(t=n.onmount)||void 0===t||t.apply(e),n.onmount=void 0})),0;e[r]=i},l=0,f=Object.entries(n);l<f.length;l++)s();return i&&e.appendChild(document.createTextNode(i)),e}(document.createElement(e),n)}},s={snru:"",memo_SNRU:function(){for(var e=0,t=window.location.href,r=0;r<t.length;r++)e+=t.charCodeAt(r);this.snru=e.toString()}},f=function(){function t(){n(this,t),o(this,"listeners",{}),o(this,"active_listeners",{})}var i,u,c,l;return a(t,[{key:"addEventListener",value:(l=r(e().mark((function t(r,n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(n);case 2:case"end":return e.stop()}}),t,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"addActiveEventListener",value:(c=r(e().mark((function t(r,n){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.active_listeners[r]||(this.active_listeners[r]=[]),this.active_listeners[r].push(n);case 2:case"end":return e.stop()}}),t,this)}))),function(e,t){return c.apply(this,arguments)})},{key:"dispatchEvent",value:(u=r(e().mark((function t(r,n){var i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i=this.listeners[r]||[];0!==i.length;)i.shift()(n);case 2:case"end":return e.stop()}}),t,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"dispatchActiveEvent",value:(i=r(e().mark((function t(r,n){var i,a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((i=this.active_listeners[r]||[]).length&&s.memo_SNRU(),a=0;a<i.length;a++)i[a](n);case 3:case"end":return e.stop()}}),t,this)}))),function(e,t){return i.apply(this,arguments)})}]),t}(),h=new f,p=function(){function t(e){var r=this;n(this,t),o(this,"component",void 0),o(this,"effects",[]),o(this,"effectuate",null),o(this,"methods",{}),o(this,"rendered",!1),o(this,"published",!1),o(this,"preRendered",null),o(this,"reference",new d),o(this,"Signal",void 0),o(this,"_state",[]),o(this,"_state_track",{}),o(this,"_state_index",0),o(this,"stash",void 0),this.component=e.bind(this),h.addActiveEventListener("active-Refs",(function(){r._state_index=0,r.published=!1}))}var i,s;return a(t,[{key:"preRender",value:function(e,t){this.preRendered=this.render(e,t)}},{key:"destroyPreRendered",value:function(){this.preRendered=null}},{key:"define",value:function(e,t){"string"!=typeof e||"function"!=typeof t||Object.prototype.hasOwnProperty.call(this,e)?console.error(" ✘  Cradova err :  Invalid Ref.define parameters"):this.methods[e]=t.bind(this)}},{key:"render",value:function(e,t){if(this.effects=[],this.rendered=!1,t&&(this.stash=e),this.preRendered)return this.preRendered;var r=this.component(e);return r instanceof HTMLElement||r instanceof DocumentFragment?(this.reference._appendDomForce("html",r),this.effector.apply(this),this.rendered=!0,this.published=!0):console.error(" ✘  Cradova err :  Invalid html content, got  - "+r),r}},{key:"instance",value:function(){return this.reference.current("html")}},{key:"_setExtra",value:function(e){this.Signal=e}},{key:"_roll_state",value:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._state[t]=e),this._state[t]}},{key:"_effect",value:function(e){this.rendered||this.effects.push(e.bind(this))}},{key:"effector",value:(s=r(e().mark((function t(){var r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<this.effects.length)){e.next=7;break}return e.next=4,this.effects[r].apply(this);case 4:r++,e.next=1;break;case 7:this.effects=[],this.effectuate&&(this.effectuate(),this.effectuate=null);case 9:case"end":return e.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"updateState",value:function(e,t){var r=this;this.rendered?this.published&&this.Activate(e):this.effectuate=function(){r.published&&r.Activate(e)},t&&(this.stash=e)}},{key:"Activate",value:(i=r(e().mark((function t(r){var n,i;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._state_index=0,this.published=!1,this.rendered){e.next=4;break}return e.abrupt("return");case 4:(n=this.component(r))instanceof HTMLElement||n instanceof DocumentFragment?((i=this.reference.current("html"))&&(i.insertAdjacentElement("beforebegin",n),i.remove()),this.published=!0,this.reference._appendDomForce("html",n),h.dispatchEvent("onmountEvent")):console.error(" ✘  Cradova err :  Invalid html content, got  - "+n);case 6:case"end":return e.stop()}}),t,this)}))),function(e){return i.apply(this,arguments)})}]),t}(),d=function(){function e(){n(this,e),o(this,"tree",{}),o(this,"globalTree",{})}return a(e,[{key:"bindAs",value:function(e){return[this,e]}},{key:"current",value:function(e){return this.tree[s.snru]?this.tree[s.snru][e]:null}},{key:"_appendDomForce",value:function(e,t){this.tree[s.snru]||(this.tree[s.snru]={}),this.tree[s.snru][e]=t}},{key:"_appendDomForceGlobal",value:function(e,t){this.globalTree[e]=t}}]),e}(),v=new d,y=function(){function e(t,r){if(n(this,e),o(this,"callback",void 0),o(this,"persistName",""),o(this,"actions",{}),o(this,"ref",[]),o(this,"value",void 0),this.value=t,r&&r.persistName){this.persistName=r.persistName;var i=localStorage.getItem(r.persistName);if(i&&"undefined"!==i&&(this.value=JSON.parse(i)),"object"===c(t))for(var a in t)Object.prototype.hasOwnProperty.call(this.value,a)||(this.value[a]=t[a])}}return a(e,[{key:"set",value:function(e,t){this.value="function"==typeof e?e(this.value):e,this.persistName&&localStorage.setItem(this.persistName,JSON.stringify(this.value)),this.ref.length&&!1!==t&&this._updateState(),this.callback&&this.callback(this.value)}},{key:"setKey",value:function(e,t,r){if("object"!==c(this.value)||Array.isArray(this.value))throw new Error("✘  Cradova err : can't set key ".concat(String(e)," . store.value is not a javascript object"));this.value[e]=t,this.persistName&&localStorage.setItem(this.persistName,JSON.stringify(this.value)),this.ref.length&&!1!==r&&this._updateState(),this.callback&&this.callback(this.value)}},{key:"createAction",value:function(e,t){if("string"!=typeof e||"function"!=typeof t)throw new Error("✘  Cradova err : can't create action, ".concat(e," is not a function"));this.actions[e]=t}},{key:"createActions",value:function(e){for(var t=0,r=Object.entries(e);t<r.length;t++){var n=u(r[t],2),i=n[0],a=n[1];if("string"!=typeof i||"function"!=typeof a)throw new Error("✘  Cradova err : can't create action, ".concat(i," is not a function"));this.actions[i]=a}}},{key:"fireAction",value:function(e,t){if(this._updateState(e,t),"function"==typeof this.actions[e])return this.actions[e].call(this,t);throw Error("✘  Cradova err : action "+e+"  does not exist!")}},{key:"bind",value:function(e){if("object"===c(this.value)&&void 0!==this.value[e])return[this,e];throw new Error("✘  Cradova err : can't bind an unavailable property!  "+e)}},{key:"_updateState",value:function(e,t){if(e&&t)this.ref.map((function(r){if(r._event===e){if(r._element_property&&r._signalProperty)return void r.ref.updateState(o({},r._element_property,t[r._signalProperty]));if(r._element_property)return void r.ref.updateState(o({},r._element_property,t));if(r._signalProperty)return void r.ref.updateState(t[r._signalProperty])}}));else for(var r=0;r<this.ref.length;r++){var n=this.ref[r];n._element_property&&n._signalProperty?n.ref.updateState(o({},n._element_property,this.value[n._signalProperty])):n._element_property?n.ref.updateState(o({},n._element_property,this.value)):n._signalProperty?n.ref.updateState(this.value[n._signalProperty]):n._element_property||n._signalProperty||n.ref.updateState(this.value)}}},{key:"bindRef",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{signalProperty:"",_element_property:""};e.render=e.render.bind(e,this.value),e._setExtra(this),this.ref.push({ref:e,_signalProperty:t.signalProperty,_element_property:t._element_property,_event:t.event})}},{key:"listen",value:function(e){this.callback=e}},{key:"clearPersist",value:function(){this.persistName&&localStorage.removeItem(this.persistName)}}]),e}(),m=function(){function t(e){n(this,t),o(this,"_name",void 0),o(this,"_html",void 0),o(this,"_packed",!1),o(this,"_template",document.createElement("div")),o(this,"_callBack",void 0),o(this,"_deCallBack",void 0),o(this,"_persist",!0),o(this,"_delegatedRoutesCount",-1),o(this,"_dropped",!1),o(this,"_errorHandler",null);var r=e.template,i=e.name,a=e.persist,s=e.renderInParallel;this._html=r instanceof p?function(){return r.render({})}:r,this._name=i||"Document",this._template.setAttribute("id","cradova-screen-set"),!0===s?(this._delegatedRoutesCount=0,this._persist=!1):"boolean"==typeof a&&(this._persist=a)}var i,u,c;return a(t,[{key:"_derive",value:function(){return{_name:this._name,_callBack:this._callBack,_deCallBack:this._deCallBack}}},{key:"_apply_derivation",value:function(e){this._name=e._name,this._callBack=e._callBack,this._deCallBack=e._deCallBack}},{key:"_delegatedRoutes",get:function(){return this._delegatedRoutesCount>100?-1:this._delegatedRoutesCount},set:function(e){e&&(this._delegatedRoutesCount+=1)}},{key:"setErrorHandler",value:function(e){this._errorHandler=e}},{key:"_package",value:(c=r(e().mark((function t(){var r;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.memo_SNRU(),"function"!=typeof this._html){e.next=16;break}return e.next=4,this._html.apply(this);case 4:if("function"!=typeof(r=e.sent)){e.next=10;break}((r=r())instanceof HTMLElement||r instanceof DocumentFragment)&&(this._template.innerHTML="",this._template.appendChild(r)),e.next=16;break;case 10:if(!(r instanceof HTMLElement||r instanceof DocumentFragment)){e.next=15;break}this._template.innerHTML="",this._template.appendChild(r),e.next=16;break;case 15:throw new Error(" ✘  Cradova err:  template function for the screen with name '".concat(this._name,"' returned ").concat(r," instead of html"));case 16:case"end":return e.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"onActivate",value:function(e){this._callBack=e}},{key:"onDeactivate",value:function(e){this._deCallBack=e}},{key:"_deActivate",value:(u=r(e().mark((function t(){return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this._deCallBack,!e.t0){e.next=4;break}return e.next=4,this._deCallBack(v.globalTree.doc);case 4:case"end":return e.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"drop",value:function(e){return"boolean"==typeof e?void(this._dropped=e):this._dropped}},{key:"_Activate",value:(i=r(e().mark((function t(){var r,n=arguments;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>0&&void 0!==n[0]&&n[0],!this._dropped){e.next=4;break}return history.go(-1),e.abrupt("return");case 4:if(h.dispatchActiveEvent("active-Refs"),this._persist&&!r&&this._packed){e.next=9;break}return e.next=8,this._package();case 8:this._packed=!0;case 9:if(document.title=this._name,v.globalTree.doc.innerHTML="",v.globalTree.doc.appendChild(this._template),h.dispatchEvent("onmountEvent"),window.scrollTo({top:0,left:0,behavior:"instant"}),e.t0=this._callBack,!e.t0){e.next=18;break}return e.next=18,this._callBack(v.globalTree.doc);case 18:case"end":return e.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})}]),t}(),g=function(){function t(){n(this,t),o(this,"lastNavigatedRouteController",void 0),o(this,"nextRouteController",void 0),o(this,"lastNavigatedRoute",void 0),o(this,"pageShow",null),o(this,"pageHide",null),o(this,"errorHandler",void 0),o(this,"loadingScreen",null),o(this,"params",{}),o(this,"routes",{}),o(this,"pageevents",[]),o(this,"paused",!1)}var i,s;return a(t,[{key:"start_pageevents",value:(s=r(e().mark((function t(r){var n=this;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){for(var e=0;e<n.pageevents.length;e++)n.pageevents[e](r)}),50);case 1:case"end":return e.stop()}}),t)}))),function(e){return s.apply(this,arguments)})},{key:"route",value:function(e,t){if(void 0!==t){if(t&&!t)throw console.error(" ✘  Cradova err:  not a valid screen  ",t),new Error(" ✘  Cradova err:  Not a valid cradova screen component");return this.routes[e]=t}}},{key:"router",value:(i=r(e().mark((function t(r,n){var i,a,o,s,c,l;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.location.pathname,!this.paused){e.next=4;break}return window.location.hash="paused",e.abrupt("return");case 4:if(i!==this.lastNavigatedRoute){e.next=6;break}return e.abrupt("return");case 6:if(this.nextRouteController?(a=this.nextRouteController,this.nextRouteController=void 0):(s=this.checker(i),c=u(s,2),a=c[0],o=c[1]),void 0===a){e.next=43;break}if(e.prev=8,"function"!=typeof a){e.next=19;break}if(!(this.loadingScreen instanceof m)){e.next=13;break}return e.next=13,this.loadingScreen._Activate();case 13:return e.next=15,a();case 15:if(a=e.sent){e.next=19;break}return this.lastNavigatedRoute&&history.pushState({},i,this.lastNavigatedRoute),e.abrupt("return");case 19:return-1!==a._delegatedRoutes&&(a._delegatedRoutes=1,l=a._derive(),(a=new m({template:a._html}))._apply_derivation(l),this.routes[i]=a),o&&(this.params.params=o),e.next=23,a._Activate(n);case 23:this.start_pageevents(i),this.lastNavigatedRouteController&&this.lastNavigatedRouteController._deActivate(),this.lastNavigatedRoute=i,this.lastNavigatedRouteController=a,e.next=41;break;case 29:if(e.prev=29,e.t0=e.catch(8),!a||!a._errorHandler){e.next=35;break}a._errorHandler(e.t0),e.next=41;break;case 35:if("function"!=typeof this.errorHandler){e.next=39;break}this.errorHandler(e.t0),e.next=41;break;case 39:throw console.error(e.t0),new Error(" ✘  Cradova err:  consider adding error boundary to the specific screen  ");case 41:e.next=46;break;case 43:if(!this.routes["*"]){e.next=46;break}return e.next=46,this.routes["*"]._Activate(n);case 46:case"end":return e.stop()}}),t,this,[[8,29]])}))),function(e,t){return i.apply(this,arguments)})},{key:"checker",value:function(e){if(this.routes[e])return[this.routes[e],{path:e}];if(this.routes[e+"/"])return[this.routes[e],{path:e}];for(var t in this.routes)if(t.includes(":")){var r=e.split("/"),n=t.split("/");e.endsWith("/")&&r.pop();var i=0,a=0;if(r.shift(),n.shift(),n.length===r.length){for(var o={_path:""},s=0;s<n.length;s++)n[s].includes(":")?a++:r[s]===n[s]&&i++;if(i+a===n.length){for(var u=0;u<n.length;u++)n[u].includes(":")&&(o[n[u].split(":")[1]]=r[u]);return o._path=t,[this.routes[t],o]}}}return[]}}]),t}(),_=new g,b=function(){function t(){n(this,t)}var i;return a(t,null,[{key:"BrowserRoutes",value:function(n){var i=function(t){var i=n[t];"object"===c(i)&&"function"==typeof i.then||"function"==typeof i?_.routes[t]=r(e().mark((function r(){var n;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof i){e.next=6;break}return e.next=3,i();case 3:e.t0=e.sent,e.next=9;break;case 6:return e.next=8,i;case 8:e.t0=e.sent;case 9:return e.next=11,e.t0;case 11:return i=e.sent,e.abrupt("return",_.route(t,(null===(n=i)||void 0===n?void 0:n.default)||i));case 13:case"end":return e.stop()}}),r)}))):_.route(t,i)};for(var a in n)i(a);t._mount()}},{key:"back",value:function(){history.go(-1)}},{key:"forward",value:function(){history.go(1)}},{key:"pauseNaviagtion",value:function(){_.paused=!0,window.location.hash="paused"}},{key:"resumeNaviagtion",value:function(){_.paused=!1,window.location.replace(window.location.pathname+window.location.search),history.go(-1)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e)throw new TypeError(" ✘  Cradova err:  href must be a defined path but got "+e+" instead");var n,i=null;if(e.includes("://"))window.location.href=e;else{if(e===window.location.pathname)return;var a=u(_.checker(e),2);i=a[0],n=a[1],i&&(_.nextRouteController=i,window.history.pushState({},"",e)),_.params.params=n,_.params.data=t,_.router(null,r)}}},{key:"setLoadingScreen",value:function(e){if(!(e instanceof m))throw new Error(" ✘  Cradova err:  Loading Screen should be a cradova screen class");_.loadingScreen=e}},{key:"onPageEvent",value:function(e){if("function"!=typeof e)throw new Error(" ✘  Cradova err:  callback for pageShow event is not a function");_.pageevents.push(e)}},{key:"packageScreen",value:(i=r(e().mark((function t(r){var n,i,a,o;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_.routes[r]){e.next=3;break}throw console.error(" ✘  Cradova err:  no screen with path "+r),new Error(" ✘  Cradova err:  cradova err: Not a defined screen path");case 3:if(n=_.checker(r),i=u(n,1),"function"!=typeof(a=i[0])){e.next=8;break}return e.next=7,a();case 7:a=e.sent;case 8:-1!==a._delegatedRoutes&&(a._delegatedRoutes=1,o=a._derive(),(a=new m({template:a._html}))._apply_derivation(o),_.routes[r]=a),a._package(),a._packed=!0;case 11:case"end":return e.stop()}}),t)}))),function(e){return i.apply(this,arguments)})},{key:"Params",get:function(){return _.params}},{key:"addErrorHandler",value:function(e){if("function"!=typeof e)throw new Error(" ✘  Cradova err:  callback for error event is not a function");_.errorHandler=e}},{key:"_mount",value:function(){var e=document.querySelector("[data-wrapper=app]");e||((e=document.createElement("div")).setAttribute("data-wrapper","app"),document.body.appendChild(e)),v._appendDomForceGlobal("doc",e),window.addEventListener("pageshow",(function(){return _.router()})),window.addEventListener("popstate",(function(e){e.preventDefault(),_.router()}))}}]),t}(),w=i("div"),k=i("h1"),x=new m({name:"Mancode forum",template:function(){return w(k("Mancode forum"))}});b.BrowserRoutes({"/forum":x,"/":x})}}}))}();
